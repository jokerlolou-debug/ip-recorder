<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP RECORDER - Kategori</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
    <header class="category-header">
        <div class="header-top">
            <button class="btn-back" onclick="goBack()">‚Üê Kembali</button>
            <h1 class="category-title" id="categoryTitle">Kategori</h1>
            <div class="header-actions">
                <button class="btn-add" onclick="openAddModal()">+ Tambah Rekod</button>
                <button class="btn-logout" onclick="logoutFromCategory()">Logout</button>
            </div>
        </div>
        <div class="search-container">
            <input type="text" id="searchInput" class="search-box" placeholder="Cari IP atau Nombor...">
            <button class="search-btn" onclick="searchRecords()">Cari</button>
        </div>
    </header>

    <main class="category-main">
        <div class="category-stats">
            <div class="stat-item">
                <span class="stat-label">Jumlah Rekod:</span>
                <span class="stat-value" id="totalRecords">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Status Aktif:</span>
                <span class="stat-value" id="activeRecords">0</span>
            </div>
        </div>

        <div class="table-container">
            <table class="records-table">
                <thead>
                    <tr>
                        <th>Bilangan</th>
                        <th>Nombor IP</th>
                        <th>Status Terkini</th>
                        <th>Aksi</th>
                        <th>Tarikh & Masa</th>
                    </tr>
                </thead>
                <tbody id="recordsTableBody">
                    <!-- Data akan dimuatkan di sini -->
                </tbody>
            </table>
        </div>

        <div id="noResults" class="no-results" style="display: none;">
            <p>Tiada rekod ditemui</p>
        </div>
    </main>

    <!-- Modal untuk Edit -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h2 id="modalTitle">Edit Rekod</h2>
            <div class="form-group">
                <label for="editIP">Nombor IP:</label>
                <input type="text" id="editIP" placeholder="Contoh: 192.168.1.1">
            </div>
            <div class="form-group">
                <label for="editStatus">Status Terkini:</label>
                <select id="editStatus">
                    <option value="Aktif">Aktif</option>
                    <option value="Tidak Aktif">Tidak Aktif</option>
                    <option value="Disiasat">Disiasat</option>
                    <option value="Dipantau">Dipantau</option>
                </select>
            </div>
            <div class="form-group">
                <label>QR Code:</label>
                <div id="editQR"></div>
            </div>
            <div class="button-group">
                <button class="btn-save" onclick="saveEditRecord()">Simpan</button>
                <button class="btn-cancel" onclick="closeEditModal()">Batal</button>
            </div>
        </div>
    </div>

    <!-- Modal untuk Barcode -->
    <div id="barcodeModal" class="modal">
        <div class="modal-content barcode-modal">
            <span class="close" onclick="closeBarcodeModal()">&times;</span>
            <h2>QR Code</h2>
            <div id="fullQR"></div>
            <p id="barcodeText" class="barcode-text"></p>
            <div style="margin-top:18px; display:flex; gap:10px; justify-content:center;">
                <button class="btn-print" onclick="printCurrentQR()">Cetak</button>
                <button class="btn-cancel" onclick="closeBarcodeModal()">Tutup</button>
            </div>
        </div>
    </div>

    <footer class="category-footer">
        <p>&copy; 2025 IP RECORDER. Hak Cipta Terpelihara.</p>
    </footer>

    <script src="category-script.js"></script>
</body>
</html>
